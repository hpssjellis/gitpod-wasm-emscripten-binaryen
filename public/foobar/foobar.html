<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebAssembly Module Example</title>
    <script src="foobar.js"></script>
</head>
<body>
    <h1>WebAssembly Function Calls</h1>
    <input type="button" value="Run Main" onclick="runMain()">
    <input type="button" value="Call Foo" onclick="callFoo()">
    <input type="button" value="Call Bar" onclick="callBar()">
    <div id="output"></div>

 <script>
    // Ensure the module is ready before calling any functions
    Module.onRuntimeInitialized = function() {
        Module.ready = true;
    };

    async function runMain() {
        if (Module.ready) {
            const result = Module.ccall('main', 'number', [], []); // main returns an integer
            document.getElementById('output').innerHTML += 'Main: ' + result + '<br>';
        }
    }

    async function callFoo() {
        if (Module.ready) {
            const result = Module.ccall('foo', 'string', [], []); // foo returns a string
            document.getElementById('output').innerHTML += 'Foo: ' + result + '<br>';
        }
    }

    async function callBar() {
        if (Module.ready) {
            const result = Module.ccall('bar', 'string', [], []); // bar returns a string
            document.getElementById('output').innerHTML += 'Bar: ' + result + '<br>';
        }
    }
</script>

</body>
</html>
